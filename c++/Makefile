CXX = g++
CXXFLAGS = -std=c++17 -Wall -Wextra -O2 -fprofile-arcs -ftest-coverage
LDFLAGS = -lgtest -lgtest_main -lpthread -lboost_unit_test_framework -fprofile-arcs -ftest-coverage

# –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö 
SRCS = array.cpp singlylinkedlist.cpp doublylinkedlist.cpp \
       queue.cpp stack.cpp hashtable.cpp tree.cpp
       
# –í—Å–µ –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã 
ALL_SRCS = $(SRCS) interface.cpp

HEADERS = array.h \
          singlylinkedlist.h \
          doublylinkedlist.h \
          queue.h \
          stack.h \
          hashtable.h \
          tree.h \
          serializationutils.h \
          interface.h
		  
# –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
GTEST_TEST = test_array_gtest.cpp
BOOST_TEST = test_array_boost.cpp  
CXXTEST_HEADER = test_array_cxxtest.cpp
CXXTEST_CPP = test_runner.cpp

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
SERIALIZATION_DEMO = demo_serialization.cpp
BENCHMARK = benchmark.cpp
CONSOLE_INTERFACE = interface.cpp

# –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
GTEST_EXEC = gtest_tests
BOOST_EXEC = boost_tests
CXXTEST_EXEC = cxxtest_tests
MAIN_EXEC = main
SERIALIZATION_EXEC = demo_serialization
BENCHMARK_EXEC = benchmark
CONSOLE_EXEC = console_app

# –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å
all: main console gtest boosttest cxxtest serialization benchmark

# –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å –∫–æ–Ω—Å–æ–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
main: main.cpp $(ALL_SRCS)
	$(CXX) $(CXXFLAGS) -o $(MAIN_EXEC) main.cpp $(ALL_SRCS)

# –û—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
console: main.cpp $(ALL_SRCS)
	$(CXX) $(CXXFLAGS) -o $(CONSOLE_EXEC) main.cpp $(ALL_SRCS)

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
serialization: $(ALL_SRCS) $(SERIALIZATION_DEMO)
	$(CXX) $(CXXFLAGS) -o $(SERIALIZATION_EXEC) $(ALL_SRCS) $(SERIALIZATION_DEMO)

# –ë–µ–Ω—á–º–∞—Ä–∫
benchmark: $(ALL_SRCS) $(BENCHMARK)
	$(CXX) $(CXXFLAGS) -o $(BENCHMARK_EXEC) $(ALL_SRCS) $(BENCHMARK)

# Google Test (–ë–ï–ó interface.cpp)
gtest: $(SRCS) $(GTEST_TEST)
	$(CXX) $(CXXFLAGS) -o $(GTEST_EXEC) $(SRCS) $(GTEST_TEST) $(LDFLAGS)

# Boost Test (–ë–ï–ó interface.cpp)
boosttest: $(SRCS) $(BOOST_TEST)
	$(CXX) $(CXXFLAGS) -o $(BOOST_EXEC) $(SRCS) $(BOOST_TEST) $(LDFLAGS)

# CxxTest (–ë–ï–ó interface.cpp)
cxxtest: $(CXXTEST_CPP)
	$(CXX) $(CXXFLAGS) -o $(CXXTEST_EXEC) $(SRCS) $(CXXTEST_CPP) $(LDFLAGS)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–Ω–Ω–µ—Ä–∞ –¥–ª—è CxxTest
$(CXXTEST_CPP): $(CXXTEST_HEADER)
	cxxtestgen --error-printer -o $(CXXTEST_CPP) $(CXXTEST_HEADER)

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
run-gtest: gtest
	./$(GTEST_EXEC)

run-boost: boosttest
	./$(BOOST_EXEC)

run-cxxtest: cxxtest
	./$(CXXTEST_EXEC)

run-main: main
	./$(MAIN_EXEC)

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
run-console: console
	./$(CONSOLE_EXEC)

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏
console-interactive: console
	./$(CONSOLE_EXEC) --interactive

console-file: console
	@if [ -f "TEST" ]; then \
		./$(CONSOLE_EXEC) --file TEST; \
	else \
		echo "‚ùå –§–∞–π–ª TEST –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª TEST —Å –∫–æ–º–∞–Ω–¥–∞–º–∏."; \
	fi

console-query: console
	@echo "üí° –ü—Ä–∏–º–µ—Ä: make console-query COMMAND='MCREATE myarray'"
	@if [ -n "$(COMMAND)" ]; then \
		./$(CONSOLE_EXEC) --query "$(COMMAND)"; \
	else \
		echo "‚ùå –£–∫–∞–∂–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: make console-query COMMAND='–≤–∞—à–∞_–∫–æ–º–∞–Ω–¥–∞'"; \
	fi

console-help: console
	./$(CONSOLE_EXEC) --help

# –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
run-serialization: serialization
	./$(SERIALIZATION_EXEC)

# –ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫–∞
run-benchmark: benchmark
	./$(BENCHMARK_EXEC)

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–π
run-all: run-gtest run-boost run-cxxtest run-serialization run-benchmark
	@echo "‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (–∫–æ–º–∞–Ω–¥–∞ check)
check: run-all
	@echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"

# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ –¥–ª—è Google Test (–ë–ï–ó interface.cpp)
coverage-gtest: gtest
	@echo "üß™ –ó–∞–ø—É—Å–∫ Google Test..."
	./$(GTEST_EXEC)
	@mkdir -p gtest_coverage_html
	@gcovr --html --html-details -o gtest_coverage_html/index.html \
		--exclude="main.cpp" \
		--exclude="interface.cpp" \
		--exclude="demo_.*\.cpp" \
		--exclude="benchmark.cpp" \
		--exclude="test_.*\.cpp" \
		--exclude="test_.*\.h" \
		--exclude=".*_test.*" \
		--print-summary
	@echo "‚úÖ Google Test –æ—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: gtest_coverage_html/index.html"

# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ –¥–ª—è Boost Test (–ë–ï–ó interface.cpp)
coverage-boost: boosttest
	@echo "üß™ –ó–∞–ø—É—Å–∫ Boost Test..."
	./$(BOOST_EXEC)
	@mkdir -p boost_coverage_html
	@gcovr --html --html-details -o boost_coverage_html/index.html \
		--exclude="main.cpp" \
		--exclude="interface.cpp" \
		--exclude="demo_.*\.cpp" \
		--exclude="benchmark.cpp" \
		--exclude="test_.*\.cpp" \
		--exclude="test_.*\.h" \
		--exclude=".*_test.*" \
		--print-summary
	@echo "‚úÖ Boost Test –æ—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: boost_coverage_html/index.html"

# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ –¥–ª—è CxxTest (–ë–ï–ó interface.cpp)
coverage-cxxtest: cxxtest
	@echo "üß™ –ó–∞–ø—É—Å–∫ CxxTest..."
	./$(CXXTEST_EXEC)
	@mkdir -p cxxtest_coverage_html
	@gcovr --html --html-details -o cxxtest_coverage_html/index.html \
		--exclude="main.cpp" \
		--exclude="interface.cpp" \
		--exclude="demo_.*\.cpp" \
		--exclude="benchmark.cpp" \
		--exclude="test_.*\.cpp" \
		--exclude="test_.*\.h" \
		--exclude=".*_test.*" \
		--print-summary
	@echo "‚úÖ CxxTest –æ—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: cxxtest_coverage_html/index.html"

# –í—Å–µ –æ—Ç—á–µ—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏—è (–ë–ï–ó interface.cpp)
coverage: coverage-gtest coverage-boost coverage-cxxtest
	@echo ""
	@echo "üéâ –í—Å–µ HTML –æ—Ç—á–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã (–ë–ï–ó interface.cpp)!"
	@echo "üìä Google Test: gtest_coverage_html/index.html"
	@echo "üìä Boost Test: boost_coverage_html/index.html"  
	@echo "üìä CxxTest: cxxtest_coverage_html/index.html"

# –°–æ–∑–¥–∞—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å –≤—Å–µ –æ—Ç—á–µ—Ç—ã
coverage-open: coverage
	@echo "üåê –û—Ç–∫—Ä—ã–≤–∞—é –≤—Å–µ –æ—Ç—á–µ—Ç—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ..."
	@if command -v xdg-open > /dev/null; then \
		xdg-open gtest_coverage_html/index.html; \
		xdg-open boost_coverage_html/index.html; \
		xdg-open cxxtest_coverage_html/index.html; \
	elif command -v open > /dev/null; then \
		open gtest_coverage_html/index.html; \
		open boost_coverage_html/index.html; \
		open cxxtest_coverage_html/index.html; \
	else \
		echo "‚ùå –ù–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä. –û—Ç—á–µ—Ç—ã –≤ –ø–∞–ø–∫–∞—Ö: *_coverage_html/"; \
	fi

# –û—Ç–∫—Ä—ã—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç—á–µ—Ç—ã
open-reports:
	@if [ -f "gtest_coverage_html/index.html" ]; then \
		echo "üåê –û—Ç–∫—Ä—ã–≤–∞—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç—á–µ—Ç—ã..."; \
		if command -v xdg-open > /dev/null; then \
			xdg-open gtest_coverage_html/index.html; \
			xdg-open boost_coverage_html/index.html; \
			xdg-open cxxtest_coverage_html/index.html; \
		elif command -v open > /dev/null; then \
			open gtest_coverage_html/index.html; \
			open boost_coverage_html/index.html; \
			open cxxtest_coverage_html/index.html; \
		else \
			echo "‚ùå –ù–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä"; \
		fi \
	else \
		echo "‚ùå –û—Ç—á–µ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: make coverage"; \
	fi

# –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ—Ç—á–µ—Ç
open-gtest:
	@if [ -f "gtest_coverage_html/index.html" ]; then \
		if command -v xdg-open > /dev/null; then \
			xdg-open gtest_coverage_html/index.html; \
		elif command -v open > /dev/null; then \
			open gtest_coverage_html/index.html; \
		else \
			echo "‚ùå –ù–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä"; \
		fi \
	else \
		echo "‚ùå Google Test –æ—Ç—á–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: make coverage-gtest"; \
	fi

open-boost:
	@if [ -f "boost_coverage_html/index.html" ]; then \
		if command -v xdg-open > /dev/null; then \
			xdg-open boost_coverage_html/index.html; \
		elif command -v open > /dev/null; then \
			open boost_coverage_html/index.html; \
		else \
			echo "‚ùå –ù–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä"; \
		fi \
	else \
		echo "‚ùå Boost Test –æ—Ç—á–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: make coverage-boost"; \
	fi

open-cxxtest:
	@if [ -f "cxxtest_coverage_html/index.html" ]; then \
		if command -v xdg-open > /dev/null; then \
			xdg-open cxxtest_coverage_html/index.html; \
		elif command -v open > /dev/null; then \
			open cxxtest_coverage_html/index.html; \
		else \
			echo "‚ùå –ù–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä"; \
		fi \
	else \
		echo "‚ùå CxxTest –æ—Ç—á–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: make coverage-cxxtest"; \
	fi

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç, –ë–ï–ó interface.cpp)
coverage-quick: gtest
	./$(GTEST_EXEC)
	@echo "üìä –ë—ã—Å—Ç—Ä—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏—è (–ë–ï–ó interface.cpp):"
	@gcovr \
		--exclude="main.cpp" \
		--exclude="interface.cpp" \
		--exclude="demo_.*\.cpp" \
		--exclude="benchmark.cpp" \
		--exclude="test_.*\.cpp" \
		--exclude="test_.*\.h" \
		--exclude=".*_test.*" \
		--print-summary

# –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–∫—Ä—ã—Ç–∏—è (–ë–ï–ó interface.cpp)
coverage-compare: coverage
	@echo "üìà –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–∫—Ä—ã—Ç–∏—è (–ë–ï–ó interface.cpp):"
	@echo ""
	@echo "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö    | Google Test | Boost Test | CxxTest"
	@echo "--------------------|-------------|------------|---------"
	@for file in array.cpp singlylinkedlist.cpp doublylinkedlist.cpp queue.cpp stack.cpp hashtable.cpp tree.cpp; do \
		base_name=$$(basename "$$file" .cpp); \
		printf "%-19s |" "$$base_name"; \
		if [ -f "gtest_coverage_html/$$file.gcov.html" ]; then \
			gtest_coverage=$$(grep -o "Lines:.*%" "gtest_coverage_html/$$file.gcov.html" | head -1 | grep -o '[0-9.]*%' || echo "N/A"); \
			printf " %-11s |" "$$gtest_coverage"; \
		else \
			printf " %-11s |" "N/A"; \
		fi; \
		if [ -f "boost_coverage_html/$$file.gcov.html" ]; then \
			boost_coverage=$$(grep -o "Lines:.*%" "boost_coverage_html/$$file.gcov.html" | head -1 | grep -o '[0-9.]*%' || echo "N/A"); \
			printf " %-10s |" "$$boost_coverage"; \
		else \
			printf " %-10s |" "N/A"; \
		fi; \
		if [ -f "cxxtest_coverage_html/$$file.gcov.html" ]; then \
			cxxtest_coverage=$$(grep -o "Lines:.*%" "cxxtest_coverage_html/$$file.gcov.html" | head -1 | grep -o '[0-9.]*%' || echo "N/A"); \
			printf " %-7s" "$$cxxtest_coverage"; \
		else \
			printf " %-7s" "N/A"; \
		fi; \
		echo ""; \
	done

# –û—á–∏—Å—Ç–∫–∞
clean:
	@echo "üßπ –û—á–∏—Å—Ç–∫–∞..."
	@rm -f $(GTEST_EXEC) $(BOOST_EXEC) $(CXXTEST_EXEC) $(MAIN_EXEC) $(SERIALIZATION_EXEC) $(BENCHMARK_EXEC) $(CONSOLE_EXEC)
	@rm -f $(CXXTEST_CPP) *.gcda *.gcno *.gcov *.info
	@rm -rf *_coverage_html
	@rm -f *.txt *.bin  # –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

# –õ–∏–Ω—Ç–∏–Ω–≥ C++ –∫–æ–¥–∞ —Å cppcheck
lint:
	@echo "üîç –õ–∏–Ω—Ç–∏–Ω–≥ C++ –∫–æ–¥–∞..."
	@which cppcheck >/dev/null 2>&1 || (echo "‚ùå cppcheck –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: brew install cppcheck" && exit 1)
	@cppcheck --enable=all \
	          --suppress=missingInclude \
	          --suppress=unusedFunction \
	          --suppress=unusedStructMember \
	          --suppress=knownConditionTrueFalse \
	          --suppress=unreadVariable \
			  --suppress=ctuOneDefinitionRuleViolation \
	          --suppress=constParameter \
	          --language=c++ --std=c++17 \
	          *.cpp *.h 2>&1 | grep -E "(error|warning|style):" || true
	@echo "‚úÖ –õ–∏–Ω—Ç–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω"

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
test-serialization: serialization
	@echo "üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏..."
	./$(SERIALIZATION_EXEC)

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
demo-all: serialization
	@echo "üöÄ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏..."
	./$(SERIALIZATION_EXEC)

# –ë—ã—Å—Ç—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
demo-quick: serialization
	@echo "‚ö° –ë—ã—Å—Ç—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏..."
	./$(SERIALIZATION_EXEC)

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–ª—è –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
create-test-file:
	@echo "üìù –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ TEST..."
	@echo "# –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞" > TEST
	@echo "# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö" >> TEST
	@echo "MCREATE myarray" >> TEST
	@echo "FCREATE mylist" >> TEST
	@echo "QCREATE myqueue" >> TEST
	@echo "SCREATE mystack" >> TEST
	@echo "TCREATE myhashtable" >> TEST
	@echo "CCREATE mytree" >> TEST
	@echo "" >> TEST
	@echo "# –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–æ–º" >> TEST
	@echo "MPUSH myarray \"Hello\"" >> TEST
	@echo "MPUSH myarray \"World\"" >> TEST
	@echo "MPUSHINDEX myarray 1 \"Beautiful\"" >> TEST
	@echo "MGET myarray" >> TEST
	@echo "MDEL myarray 1" >> TEST
	@echo "MGET myarray" >> TEST
	@echo "" >> TEST
	@echo "# –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º" >> TEST
	@echo "FPUSHHEAD mylist \"First\"" >> TEST
	@echo "FPUSHTAIL mylist \"Last\"" >> TEST
	@echo "FPUSHHEAD mylist \"NewFirst\"" >> TEST
	@echo "FGET mylist" >> TEST
	@echo "FOELHEAD mylist" >> TEST
	@echo "FGET mylist" >> TEST
	@echo "" >> TEST
	@echo "# –†–∞–±–æ—Ç–∞ —Å –æ—á–µ—Ä–µ–¥—å—é" >> TEST
	@echo "QPUSH myqueue \"Job1\"" >> TEST
	@echo "QPUSH myqueue \"Job2\"" >> TEST
	@echo "QPOP myqueue" >> TEST
	@echo "QPUSH myqueue \"Job3\"" >> TEST
	@echo "" >> TEST
	@echo "# –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–µ–∫–æ–º" >> TEST
	@echo "SPUSH mystack \"Layer1\"" >> TEST
	@echo "SPUSH mystack \"Layer2\"" >> TEST
	@echo "SPOP mystack" >> TEST
	@echo "SPUSH mystack \"Layer3\"" >> TEST
	@echo "" >> TEST
	@echo "# –†–∞–±–æ—Ç–∞ —Å —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–µ–π" >> TEST
	@echo "ITINSERT myhashtable 1 \"Alice\"" >> TEST
	@echo "ITINSERT myhashtable 2 \"Bob\"" >> TEST
	@echo "ITINSERT myhashtable 17 \"Charlie\"" >> TEST
	@echo "TGET myhashtable 1" >> TEST
	@echo "TGET myhashtable 17" >> TEST
	@echo "" >> TEST
	@echo "# –†–∞–±–æ—Ç–∞ —Å –¥–µ—Ä–µ–≤–æ–º" >> TEST
	@echo "CINSERT mytree \"Root\"" >> TEST
	@echo "CINSERT mytree \"Left\"" >> TEST
	@echo "CINSERT mytree \"Right\"" >> TEST
	@echo "CINSERT mytree \"Middle\"" >> TEST
	@echo "" >> TEST
	@echo "# –í—ã–≤–æ–¥ –≤—Å–µ—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä" >> TEST
	@echo "PRINT myarray" >> TEST
	@echo "PRINT mylist" >> TEST
	@echo "PRINT myqueue" >> TEST
	@echo "PRINT mystack" >> TEST
	@echo "PRINT myhashtable" >> TEST
	@echo "PRINT mytree" >> TEST
	@echo "" >> TEST
	@echo "HELP" >> TEST
	@echo "‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª TEST —Å–æ–∑–¥–∞–Ω"

# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
quick-start: console create-test-file
	@echo "üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
	@echo "üí° –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@echo "   make console-interactive  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º"
	@echo "   make console-file         - –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ñ–∞–π–ª–∞ TEST"
	@echo "   make console-query COMMAND='–≤–∞—à–∞_–∫–æ–º–∞–Ω–¥–∞' - –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É"
	@echo ""
	@echo "üîß –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥:"
	@echo "   make console-query COMMAND='MCREATE testarr'"
	@echo "   make console-query COMMAND='MPUSH testarr \"Hello\"'"
	@echo "   make console-query COMMAND='MGET testarr'"

# –ü–æ–º–æ—â—å
help:
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@echo "  make all              - –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã"
	@echo "  make main             - –°–æ–±—Ä–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É"
	@echo "  make console          - –°–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
	@echo "  make serialization    - –°–æ–±—Ä–∞—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏"
	@echo "  make benchmark        - –°–æ–±—Ä–∞—Ç—å –±–µ–Ω—á–º–∞—Ä–∫"
	@echo "  make coverage         - –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –æ—Ç—á–µ—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏—è (–ë–ï–ó interface.cpp)"
	@echo "  make coverage-open    - –°–æ–∑–¥–∞—Ç—å –∏ –æ—Ç–∫—Ä—ã—Ç—å –≤—Å–µ –æ—Ç—á–µ—Ç—ã"
	@echo "  make open-reports     - –û—Ç–∫—Ä—ã—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç—á–µ—Ç—ã"
	@echo "  make coverage-compare - –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–∫—Ä—ã—Ç–∏—è (–ë–ï–ó interface.cpp)"
	@echo "  make run-all          - –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã"
	@echo "  make check            - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ run-all)"
	@echo "  make clean            - –û—á–∏—Å—Ç–∫–∞"
	@echo "  make lint             - –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞"
	@echo ""
	@echo "üéÆ –ö–æ–º–∞–Ω–¥—ã –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
	@echo "  make run-console          - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
	@echo "  make console-interactive  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º"
	@echo "  make console-file         - –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ñ–∞–π–ª–∞ TEST"
	@echo "  make console-query        - –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É (—É–∫–∞–∑–∞—Ç—å COMMAND)"
	@echo "  make console-help         - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
	@echo "  make create-test-file     - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –∫–æ–º–∞–Ω–¥"
	@echo "  make quick-start          - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
	@echo ""
	@echo "üß™ –ö–æ–º–∞–Ω–¥—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏:"
	@echo "  make run-serialization - –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏"
	@echo "  make test-serialization- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏"
	@echo "  make demo-all         - –ü–æ–ª–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏"
	@echo "  make demo-quick       - –ë—ã—Å—Ç—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏"
	@echo ""
	@echo "üìä –ö–æ–º–∞–Ω–¥—ã –ø–æ–∫—Ä—ã—Ç–∏—è (–ë–ï–ó interface.cpp):"
	@echo "  make coverage-gtest   - –û—Ç—á–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è Google Test"
	@echo "  make coverage-boost   - –û—Ç—á–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è Boost Test"
	@echo "  make coverage-cxxtest - –û—Ç—á–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è CxxTest"
	@echo "  make coverage-quick   - –ë—ã—Å—Ç—Ä—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç"
	@echo ""
	@echo "üåê –ö–æ–º–∞–Ω–¥—ã –æ—Ç–∫—Ä—ã—Ç–∏—è –æ—Ç—á–µ—Ç–æ–≤:"
	@echo "  make open-gtest       - –û—Ç–∫—Ä—ã—Ç—å Google Test –æ—Ç—á–µ—Ç"
	@echo "  make open-boost       - –û—Ç–∫—Ä—ã—Ç—å Boost Test –æ—Ç—á–µ—Ç"
	@echo "  make open-cxxtest     - –û—Ç–∫—Ä—ã—Ç—å CxxTest –æ—Ç—á–µ—Ç"
	@echo ""
	@echo "üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
	@echo "  make console-query COMMAND='MCREATE myarray'"
	@echo "  make console-query COMMAND='MPUSH myarray \"Hello World\"'"
	@echo "  make console-query COMMAND='MGET myarray'"
	@echo "  make console-interactive"

.PHONY: all main console serialization benchmark gtest boosttest cxxtest run-gtest run-boost run-cxxtest \
        run-main run-console console-interactive console-file console-query console-help run-serialization \
        run-benchmark run-all check coverage coverage-gtest coverage-boost coverage-cxxtest coverage-open \
        open-reports open-gtest open-boost open-cxxtest coverage-quick coverage-compare clean lint \
        test-serialization demo-all demo-quick create-test-file quick-start help
